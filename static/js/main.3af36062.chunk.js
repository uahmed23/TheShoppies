(this.webpackJsonpthe_shoppies=this.webpackJsonpthe_shoppies||[]).push([[0],{63:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var i=n(1),c=n.n(i),a=n(32),s=n.n(a),r=n(10),o=n(18),l=n.n(o),j=n(21),u=n(33),m=n(8),b=n(34),d=n.n(b),h=n(11),O=n.n(h),v=n(0),f=c.a.createContext();function x(e){var t=e.children,n=Object(i.useState)([]),c=Object(m.a)(n,2),a=c[0],s=c[1],r=Object(i.useState)([]),o=Object(m.a)(r,2),b=o[0],h=o[1],x=Object(i.useState)(0),g=Object(m.a)(x,2),p=g[0],N=g[1],S=Object(i.useState)(""),w=Object(m.a)(S,2),C=w[0],k=w[1];function y(){return(y=Object(u.a)(l.a.mark((function e(t,n){var i,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("https://www.omdbapi.com/?apikey=5209986e&s=".concat(t,"&page=").concat(n,"&type=movie"));case 2:i=e.sent,c=i.data.Search?i.data.Search:[],a=i.data.totalResults?i.data.totalResults:0,N(a),h(c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(i.useEffect)((function(){O.a.get("nominations")||O.a.set("nominations",[]);var e=O.a.get("nominations");s(e)}),[]),Object(v.jsx)(f.Provider,{value:{nominations:a,addToNominations:function(e){var t=[].concat(Object(j.a)(a),[e]);O.a.set("nominations",t),s((function(t){return[].concat(Object(j.a)(t),[e])}))},removeFromNominations:function(e){var t=a.filter((function(t){return t.imdbID!==e}));O.a.set("nominations",t),s((function(t){return t.filter((function(t){return t.imdbID!==e}))}))},movies:b,totalResults:p,fetchMovies:function(e,t){return y.apply(this,arguments)},searchString:C,setSearchString:k},children:t})}n(63);var g=n(2);var p=function(){var e=Object(i.useContext)(f).nominations.length>0?"ri-star-fill":"ri-star-line";return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("header",{children:[Object(v.jsx)(r.b,{to:"/",children:Object(v.jsx)("h2",{children:"The Shoppies"})}),Object(v.jsx)(r.b,{to:"/nominations",children:Object(v.jsxs)("div",{className:"star-page",children:[Object(v.jsx)("h3",{children:"My Nominations"}),Object(v.jsx)("i",{className:"".concat(e," header-star ri-fw ri-2x")})]})})]})})};var N=function(e){var t=e.movie,n=Object(i.useState)(!1),c=Object(m.a)(n,2),a=c[0],s=c[1],r=Object(i.useContext)(f).removeFromNominations,o=a?"ri-delete-bin-fill remove":"ri-delete-bin-line remove";return Object(v.jsx)("main",{className:"nominees",children:Object(v.jsxs)("div",{className:"small image-container",children:[Object(v.jsx)("i",{className:o,onClick:function(){return r(t.imdbID)},onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)}}),Object(v.jsxs)("h5",{children:[" ","".concat(t.Title," ( ").concat(t.Year," )")]}),Object(v.jsx)("img",{alt:"".concat(t.Title," ( ").concat(t.Year," )"),src:t.Poster,className:"nominee-img-grid"})]})})};var S=function(){var e=Object(i.useContext)(f).nominations,t=e.map((function(e){return Object(v.jsx)(N,{movie:e},e.imdbID)}));return Object(v.jsxs)("main",{className:"nominee-page",children:[Object(v.jsx)("div",{className:"nomination-page-title",children:Object(v.jsx)("h1",{children:"Nomination List"})}),e?t:null,e.length>0?null:Object(v.jsx)("p",{children:"You have not nominated any movies yet."})]})};var w=function(e){var t=e.movie,n=Object(i.useState)(!1),c=Object(m.a)(n,2),a=c[0],s=c[1],r=Object(i.useContext)(f),o=r.addToNominations,l=r.nominations,j=r.removeFromNominations;return Object(v.jsxs)("div",{className:"big image-container",onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)},children:[Object(v.jsx)("h5",{children:"".concat(t.Title," ( ").concat(t.Year," )")}),Object(v.jsx)("img",{alt:"".concat(t.Title," ( ").concat(t.Year," )"),src:t.Poster,className:"image-grid"}),l.some((function(e){return e.imdbID===t.imdbID}))?Object(v.jsx)("i",{className:"ri-star-fill star",onClick:function(){return j(t.imdbID)}}):a&&l.length<5?Object(v.jsx)("i",{className:"ri-star-line star",onClick:function(){return o(t)}}):a&&l.length>4?Object(v.jsx)("i",{className:"ri-alert-fill full"}):void 0]})},C=n(36),k=n.n(C);var y=function(){var e=Object(i.useContext)(f),t=e.movies,n=e.fetchMovies,c=e.totalResults,a=e.nominations,s=e.searchString,r=e.setSearchString,o=Object(i.useState)(1),l=Object(m.a)(o,2),j=l[0],u=l[1];Object(i.useEffect)((function(){var e=document.getElementById("limitbanner"),t=document.getElementById("bannerline").offsetTop,n=window.addEventListener("scroll",(function(){a.length>4&&window.pageYOffset>t?(e.classList.add("sticky"),e.classList.remove("invisible")):e.classList.add("invisible")}));return function(){window.removeEventListener("scroll",n)}}),[a]);var b=Object(i.useCallback)(k.a.debounce((function(e){return n(e,j)}),500),[]),d=t.map((function(e,t){return Object(v.jsx)(w,{movie:e},t)}));return console.log(t),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"pageInfo",children:[Object(v.jsxs)("p",{children:["page ",j," out of ",Math.floor(c/10)+1]}),Object(v.jsx)("a",{href:"#",onClick:function(){j>1&&(n(s,j-1),u((function(e){return e-1})))},className:"previous",children:"\u2039"}),Object(v.jsx)("a",{href:"#",onClick:function(){j<Math.floor(c/10)+1&&(n(s,j+1),u((function(e){return e+1})))},className:"next",children:"\u203a"})]}),Object(v.jsxs)("div",{className:"search-container",children:[Object(v.jsx)("input",{label:"Movie Title...",value:s,placeholder:"Search movie title...",onChange:function(e){u(1),r(e.target.value),b(e.target.value)}}),Object(v.jsxs)("div",{className:"message",style:{height:"40px",width:"95%",textAlign:"center"},children:[t&&t.length>0&&a&&a.length<5?Object(v.jsxs)("h4",{children:["Click ",Object(v.jsx)("i",{className:"ri-star-line banner-star"})," on a poster to nominate a movie"]}):null,a&&a.length>4?Object(v.jsxs)("h4",{children:[Object(v.jsx)("i",{className:"ri-alert-line banner-full"})," nomination limit reached (5 nominees max.)"]}):null]})]}),Object(v.jsx)("div",{id:"bannerline"}),Object(v.jsx)("header",{id:"limitbanner",className:"banner invisible",children:"5 movie nomination limit reached"}),Object(v.jsx)("main",{className:"movies",children:!t||t.length<1?Object(v.jsx)("h3",{children:"   No matching movie title found"}):d})]})};var I=function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)(p,{}),Object(v.jsxs)(g.c,{children:[Object(v.jsx)(g.a,{exact:!0,path:"/",children:Object(v.jsx)(y,{})}),Object(v.jsx)(g.a,{path:"/nominations",children:Object(v.jsx)(S,{})})]})]})};s.a.render(Object(v.jsx)(x,{children:Object(v.jsx)(r.a,{children:Object(v.jsx)(I,{})})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.3af36062.chunk.js.map